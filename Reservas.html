<!DOCTYPE html>
<html lang="es">
<head>
    <title>Reservas</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />
    
</head>
    <body>
    
    <!--
        Portada Principal del Hotel
    -->
        <div class="row">
            <div class="col-md-12">
                <img class="img-rounded" src="Imagenes/PortadaPrincipal.jpg" width="100%" height=750px>
            </div>
        </div> 
        
    <!--
        Principal Descripcion del Hotel
    -->
        <div class="container">
            <h1 class="text-center">Hotel Simon Park</h1>
            <h5>El Simon park es un hotel de 4 estrellas situado en primera linea del paseo del arenal con unas vistas expectaculares a el agua cristalina que tenemos en estas islas.</h5>
            <h5>Las habitaciones con la que contamos en el Simon park son de ultima generacion renovadas hace 2 años por expertos architectos.</h5>
        </div>
        
    <!--
        Botones a otras paginas
    -->
        <div class="btn-group btn-group-justified" style="margin-bottom: 30px">
            <a href="Inicio.html" class="btn btn-primary">Principal</a>
            <div class="btn-group">
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    Habitaciones <span class="caret"></span></button>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="Habitaciones.html">Habitaciones</a></li>   
                        <li><a href="Habitacion-simple.html">Habitacion Simple</a></li>
                        <li><a href="Habitacion-doble.html">Habitacion Doble</a></li>
                        <li><a href="Habitacion-Premium.html">Habitacion Premium</a></li>
                        <li><a href="Habitacion-deluxe.html">Habitacion Deluxe</a></li>
                        <li><a href="Suit.html">Suit</a></li>
                    </ul>
            </div>
            <a href="Contacto.html" class="btn btn-primary">Contacto</a>
            <a href="Reservas.html" class="btn btn-primary">Reservar</a>
        </div>
    <!--
        "Interior de la pagina Habitaciones"
    -->
        <div class="container">           
            <div class="hidden" role="alert" id="Alertafechas"></div>
        </div>
        <!--
            "Calendario"
        -->
        
        <div class="row">
            <div class='col-md-offset-4 col-md-2'>
                <div class="form-group">
                    <label for="email">Fecha Entrada:</label>
                    <div class='input-group date' id='entradareserva'>
                        <input id="entrada" type='text' class="form-control" placeholder="MM/DD/AAAA"/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
            <div class='col-md-2'>
                <div class="form-group">
                    <label for="email">Fecha De Salida</label>
                    <div class='input-group date' id='salidareserva'>
                        <input id="salida" type='text' class="form-control" placeholder="MM/DD/AAAA"/>
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-offset-3 col-md-3">
                <div class="form-group">
                    <label for="usr">Nombre</label>
                    <input type="text" class="form-control" id="Nombrereserva">
                </div>
                <div class="form-group">
                    <label for="usr">Apellido</label>
                    <input type="text" class="form-control" id="Apellidoreserva">
                </div>
            </div>
            
            <div class="col-md-3">
                <form>
                    <div class="form-group">
                        <label for="sel1">Habitación:</label>
                        <select class="form-control" id="Habitacion">
                            <option>Habitacion Simple</option>
                            <option>Habitacion Doble</option>
                            <option>Habitacion Premium</option>
                            <option>Habitacion Deluxe</option>
                            <option>Suit</option>
                        </select>
                    </div>
                </form>
                <form>
                    <div class="form-group">
                        <label for="sel1">Numero De Personas:</label>
                        <select class="form-control" id="Personas">
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
        
        <button type="button" class="btn btn-info btn-lg center-block" data-toggle="modal" onclick="Mostrarfinal()">Reservar</button>
        <div class="Container" style="margin-bottom: 50px">
            <div class="text-center"id="salidaDatos"></div>
        </div>
    <!--
        Carrusel de Imagenes del hotel
    -->
        <div class="container" style="margin-bottom: 50px">
            <div id="myCarousel" class="carousel slide center-block" data-ride="carousel" style="width:750px; height:500px;" >
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                    <li data-target="#myCarousel" data-slide-to="3"></li>
                </ol>

                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                      <img src="Imagenes/vestibulo.jpg" alt="Vestibulo"   width="750" height="500">
                      <div class="carousel-caption">
                        <h3>Vestibulo</h3>
                        <p>Nuestro espectacular Vestibulo</p>
                      </div>
                    </div>

                    <div class="item">
                      <img src="Imagenes/Habitacion.jpg" alt="habitacion"    width="750" height="500">
                      <div class="carousel-caption">
                        <h3>habitaciones basicas</h3>
                      </div>
                    </div>

                    <div class="item">
                      <img src="Imagenes/HabitacionBalcon.jpeg" alt="habitacionBalcon" width="750" height="500">
                      <div class="carousel-caption">
                        <h3>Habitacion Vista al mar</h3>
                        <p>Espectacurales vistas desde nuestros balcones</p>
                      </div>
                    </div>

                    <div class="item">
                      <img src="Imagenes/Spa.jpg" alt="Spa" width="750" height="500">
                      <div class="carousel-caption">
                        <h3>Spa</h3>
                        <p>Disponemos de spa con personal cualificado para dar masajes, baños relajantes y mucho mas</p>
                      </div>
                    </div>
                </div>

                <!-- Left and right controls -->
                <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev" aria-hidden="true">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next" aria-hidden="true">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        
    <!--
        Menu Final de Pagina
    -->
        <div class="container">
            <div class="row">
                <div class="col-md-3 text-center">
                    <h4>Simon Hotels <br> International</h4>
                    <p><a  href="Trabajandoenello.html">Quienes Somos</a></p>
                    <p><a  href="Trabajandoenello.html">Club Simon</a></p>
                    <p><a  href="Trabajandoenello.html">Sala De Prensa</a></p>
                </div>
                <div class="col-md-3 text-center">
                    <ul>
                        <h3>Habitaciones</h3>
                        <p><a  href="Habitacion-simple.html">Habitacion Simple</a></p>
                        <p><a  href="Habitacion-doble.html">Habitacion Doble</a></p>
                        <p><a  href="Habitacion-Premium.html">Habitacion Premium</a></p>
                        <p><a  href="Habitacion-deluxe.html">Habitacion Deluxe</a></p>
                        <p><a  href="Suit.html">Suit</a></p>
                    </ul>
                </div>
                <div class="col-md-3 text-center">
                        <h3>Contacto</h3>
                        <p><a  href="Contacto.html">Contacto</a></p>
                        <p><a  href="https://www.google.es/maps/@39.5087446,2.7480992,16.5z">Donde Encontrarnos</a></p>
                </div>
                <div class="col-md-3 text-center">
                        <h3>Reserva</h3>
                        <p><a  href="Reservas.html">Reserva Tu Habitacion Ya</a></p>
                        <p><a  href="Trabajandoenello.html">Comprobar el estado de tu reserva</a></p>
                </div>
            </div>
            
        </div>
    
    <!--
        Script para saber el numero de dias entre dos fechas
    -->
        <script>
            var error = 0;
            function Mostrarfinal(){
                var final= reservas();
                var Nombre= document.getElementById("Nombrereserva").value;
                var Apellido= document.getElementById("Apellidoreserva").value;
                var personas = document.getElementById("Personas").value;
                
                if (error == 0){
                    document.getElementById("salidaDatos").innerHTML = "SRA./SR. " + Nombre + " " + Apellido + " El Precio Final para su reserva es de: " + final + " Reserva Hecha Para " + personas + " Personas";    
                }
            }
            
            function reservas(){
                var currentday = moment(document.getElementById("entrada").value);
                var salidareserva = moment(document.getElementById("salida").value);
                var diferencia= moment.duration(salidareserva.diff(currentday)).asDays();
                var preciobase = calcularpreciohabitacion();
                var preciofinal = 0;
                var mesactual = moment(currentday).month() + 1;
                var mes= mesactual;
                var total =[];
                var elemento = document.getElementById("Alertafechas");
                var personas = document.getElementById("Personas").value;
                
                if(diferencia == 0){
                    elemento.className = "alert alert-danger text-center col-md-4 col-md-offset-4";
                    document.getElementById("Alertafechas").innerHTML = "No has introducido una fecha de Llegada o Salida "
                    error = 1;
                    return;
                }
                else{
                    elemento.className = "alert alert-success text-center col-md-4 col-md-offset-4";
                    document.getElementById("Alertafechas").innerHTML = "Tu Reserva Se ha efectuado correctamente"
                    error = 0;
                    while (currentday < salidareserva){

                        preciofinal = preciofinal + calcularprecio(currentday,preciobase);
                        if(mesactual!=mes){
                            if (mesactual == 6 || mesactual == 7 || mesactual == 8 || mesactual == 9){
                                preciofinal = preciofinal *1.4;
                            }
                            total.push(preciofinal);
                            preciofinal= 0;
                            mes = mesactual;
                        }
                        mesactual = moment(currentday).month() + 1;
                        currentday = moment(currentday).add(1, 'd');
                    }
                    if(diferencia == 1){
                            preciofinal = preciofinal * 1.20;
                        }
                    if(diferencia!=1){
                        preciofinal = preciofinal + calcularprecio(currentday,preciobase)
                    }
                    if ((mesactual == 6 || mesactual == 7 || mesactual == 8 || mesactual == 9)){
                            preciofinal = preciofinal *1.4;
                    }
                    total.push(preciofinal);
                    var final = resultadofinal(total);
                    if(diferencia>7){
                        final = final * 0.9;
                    }
                    final = final * personas;
                }
                return(final);
            }
            
            function calcularpreciohabitacion(){
                var habitacion= document.getElementById("Habitacion").value;
                if (habitacion == "Habitacion Simple"){
                    return(30);
                }
                else if(habitacion == "Habitacion Doble"){
                    return(50);
                }
                else if(habitacion == "Habitacion Premium"){
                    return(125);
                }
                else if(habitacion == "Habitacion Deluxe"){
                    return(250);
                }
                else if(habitacion == "Suit"){
                    return(750);
                }
            }
            
            function resultadofinal(dato){
                var precio = 0;
                for(let i =0; i< dato.length; i++){
                    precio= precio + dato[i];
                }
                return(precio);
            }
            
            function calcularprecio(day,precio){
                var diasemana = moment(day).day();
                var preciototal = 0;
                if(diasemana == 6 || diasemana == 7){
                    preciototal = preciototal + (precio * 1.15);
                    return(preciototal);
                }
                else{
                    preciototal = precio;
                    return(preciototal);
                }
            }
            
        </script>
        
    <!--
        Script Para el Calendario
    -->
        <script src="Moment.js"></script>
        <script src="jquery.min.js"></script>
        <script type="text/javascript" src="bootstrap/js/transition.js"></script>
        <script type="text/javascript" src="bootstrap/js/collapse.js"></script>
        <script type="text/javascript" src="bootstrap/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="bootstrap-datetimepicker/src/js/bootstrap-datetimepicker.js"></script>
        <script type="text/javascript">
            $(function () {
                $('#entradareserva').datetimepicker({
                    minDate: moment(),
                    format: "MM/DD/YYYY"
                });
                $('#salidareserva').datetimepicker({
                    format: "MM/DD/YYYY",
                    useCurrent: false //Important! See issue #1075
                });
                $("#entradareserva").on("dp.change", function (e) {
                    $('#salidareserva').data("DateTimePicker").minDate(e.date);
                });
                $("#salidareserva").on("dp.change", function (e) {
                    $('#entradareserva').data("DateTimePicker").maxDate(e.date);
                });
            });
        </script>

    </body>
</html>