
<!DOCTYPE html>
<html lang="es">
    
<head>
    <title>Reservas</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />
</head>   
    
     <body>
         
        <div class="row">
            <div class='col-md-5'>
                <div class="form-group">
                    <div class='input-group date' id='entradareserva'>
                        <input id="entrada" type='text' class="form-control" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
            <div class='col-md-5'>
                <div class="form-group">
                    <div class='input-group date' id='salidareserva'>
                        <input id="salida" type='text' class="form-control" />
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
            <div class='col-md-2'>
                <button type="button" class="btn btn-info btn-lg" data-toggle="modal" onclick="reservas()">Reservar</button>
            </div>
            
        </div>
            <div id="salidaDatos"></div>
         <!--
            Script para saber el numero de dias entre dos fechas
        -->
        <script>
            
            function reservas(){
                var entradareserva = moment(document.getElementById("entrada").value)
                var salidareserva = moment(document.getElementById("salida").value)
                var diferencia= moment.duration(salidareserva.diff(entradareserva)).asDays();
                var diferenciameses = moment.duration(salidareserva.diff(entradareserva)).asDays() + 1;
                var preciobase = 30;
                var diasemana = moment(entradareserva).day();
                var mesactual = moment(entradareserva).month() + 1;
                var diames = moment(entradareserva).date();
                var nextday= moment(entradareserva).add(1, 'd');

                
                
                for (i=0; i<diferencia; i++) {
                    if(diasemana == 8){
                        diasemana = 1;
                    }
                    if(diferencia != 1){
                        if(diasemana == 6 || diasemana == 7){
                            preciototal = preciototal + 34,5;                                               
                        }
                        else{
                            preciototal = preciototal + preciobase;
                        }
                    }
                    else{
                        preciototal = preciobase * 1,20;
                    }
                    diasemana++;
                    
                }
                
                
                if(diferencia > 7){
                    preciofinal = preciototal*0,9;
                }
                
                for (i=0; i<diferenciameses; i++) {
                        if(mesactual == 12){
                            mesactual = 1;
                        }
                        if(mesactual == 6, mesactual == 7, mesactual == 8, mesactual == 9){
                            preciofinal = preciototal * 1,4;
                        }
                        else{
                            preciofinal = preciototal;
                        }
                        
                    }
                
                document.getElementById("salidaDatos").innerHTML = nextday
            }
            </script>
         
         <!--
            Script Para el Calendario
        -->
        <script src="Moment.js"></script>
        <script src="jquery.min.js"></script>
        <script type="text/javascript" src="bootstrap/js/transition.js"></script>
        <script type="text/javascript" src="bootstrap/js/collapse.js"></script>
        <script type="text/javascript" src="bootstrap/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="bootstrap-datetimepicker/src/js/bootstrap-datetimepicker.js"></script>
        <script type="text/javascript">
            $(function () {
                $('#entradareserva').datetimepicker({
                    minDate: moment(),
                    format: "DD/MM/YYYY"
                });
                $('#salidareserva').datetimepicker({
                    format: "DD/MM/YYYY",
                    useCurrent: false //Important! See issue #1075
                });
                $("#entradareserva").on("dp.change", function (e) {
                    $('#salidareserva').data("DateTimePicker").minDate(e.date);
                });
                $("#salidareserva").on("dp.change", function (e) {
                    $('#entradareserva').data("DateTimePicker").maxDate(e.date);
                });
            });
        </script>
         
    </body>
</html>